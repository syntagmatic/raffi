<!DOCTYPE HTML>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Raphaël Playground in CoffeeScript</title>
<link rel="stylesheet" href="style.css" type="text/css" media="screen">
<script src="raphael.js"></script>
<script src="coffee-script.js"></script>
<script type="text/coffeescript" src="raffi.coffee"></script>
</head><body>
<p>A CoffeeScript Compiler for Raphaël</p>
<div id="text">
<textarea id="code">
n = 16

cube = (x) -> pow(x,3)
pos =-> 200 + cube (12 * (random()-0.5))
size =-> cube 4*random()

circles = set()
for i in [1..n]
  circles.push circle(pos(),pos(),size()).attr
    fill: color = getColor()
    opacity: 0.6
    "stroke": "#333"
    "stroke-width": 1
    "stroke-opacity": 0

axis.attr stroke: "#aaa"
grid.attr stroke: "#e0e0e0"
labels.attr stroke: "#666"

circles.mouseover ->
  this.attr({
    "stroke-opacity": 1
    opacity:0.85
    cursor: "pointer"})
circles.mouseout ->
  this.animate({
    "stroke-opacity": 0
    opacity:0.6
    cursor: "pointer"},140)
</textarea>
<button id="run" type="button">Graph it!</button>

<p>Raphael Cheat Sheet<br/>
<small><a href="http://raphaeljs.com/reference.html">Full Reference</a></small></p>
<pre class="code">
<span># floats</span>
x, y, r, rx, ry, w, h

<span># strings</span>
url, str

<span># objects</span>
circle(x,y,r)
rect(x, y, w, h, r)
ellipse(x, y, rx, ry)
image(url, x, y, w, h)
text(x, y, str)

<span># paths - use <a href="http://www.w3schools.com/svg/svg_path.asp">svg path</a> string format</span>
path("M10 10L90 90")

<span># sets</span>
st = set()
st.push circle(x,y,r)
</pre>

<p style="padding-top:18px;clear:left;">CoffeeScript Cheat Sheet<br/>
<small><a href="http://jashkenas.github.com/coffee-script/">Full Reference</a></small></p>
<pre class="code">
<span># assignment</span>
x = 4

<span># functions</span>
mult = (a,b) -> a*b

<span># arrays</span>
list = [1,2,3,4,5]

<span># objects</span>
shape =
  circ: (x,y) -> circle(x,y,15)
  sq: (x,y) -> rect(x,y,15,15)

<span># new square at 75, 125</span>
shape.sq(75,125)

<span># array comprehensions</span>
circles = (shape.circ(25*x,200) for x in [1..10])
</pre>

<p>Math</p>
<pre class="code">
sin pi/6 <span># 0.49999 ~ 1/2</span>
acos 1/2 <span># 1.04719 ~ pi/3</span>

random() <span># generate random number, 0-1</span>

abs -5 <span># 5</span>
pow(x,3) <span># x^3</span>

floor 4.5 <span># 4</span>
ceil 5.2 <span># 6</span>
</pre>
</div>
<div id="canvas"></div>
</body></html>
